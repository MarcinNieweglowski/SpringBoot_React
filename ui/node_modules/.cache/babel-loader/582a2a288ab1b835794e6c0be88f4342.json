{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { uiActions } from \"../store/ui-slice\";\nimport { NotificationStatus } from \"../store/NotificationStatus\";\nexport const STORAGE_KEY = \"product_app_jwt_token\";\nexport const getTokenFromStorage = () => {\n  const token = localStorage.getItem(STORAGE_KEY);\n  return token ? token : redirectAndSendUiNotification();\n};\nconst redirectAndSendUiNotification = () => {\n  _s();\n  const dispatch = useDispatch();\n  dispatch(uiActions.showNotification({\n    status: NotificationStatus.ERROR,\n    title: 'Authorization token not found',\n    message: 'You must log in to perform the action'\n  }));\n  const history = useHistory();\n  history.replace(\"/login\");\n  return \"\";\n};\n_s(redirectAndSendUiNotification, \"FxNkVwM1QRg2/kU3+RDi4ll7EAM=\", false, function () {\n  return [useDispatch, useHistory];\n});","map":{"version":3,"names":["useHistory","useDispatch","uiActions","NotificationStatus","STORAGE_KEY","getTokenFromStorage","token","localStorage","getItem","redirectAndSendUiNotification","dispatch","showNotification","status","ERROR","title","message","history","replace"],"sources":["C:/Workspace/Java_Test/springboot-react-test/ui/src/utils/auth.tsx"],"sourcesContent":["import {useHistory} from \"react-router-dom\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {uiActions} from \"../store/ui-slice\";\r\nimport {NotificationStatus} from \"../store/NotificationStatus\";\r\n\r\nexport const STORAGE_KEY = \"product_app_jwt_token\";\r\n\r\nexport const getTokenFromStorage = (): string => {\r\n  const token = localStorage.getItem(STORAGE_KEY);\r\n  return token ? token : redirectAndSendUiNotification();\r\n}\r\n\r\nconst redirectAndSendUiNotification = (): string => {\r\n  const dispatch = useDispatch();\r\n\r\n  dispatch(\r\n    uiActions.showNotification({\r\n      status: NotificationStatus.ERROR,\r\n      title: 'Authorization token not found',\r\n      message: 'You must log in to perform the action'\r\n    })\r\n  );\r\n\r\n  const history = useHistory();\r\n  history.replace(\"/login\");\r\n\r\n  return \"\";\r\n}"],"mappings":";AAAA,SAAQA,UAAU,QAAO,kBAAkB;AAC3C,SAAQC,WAAW,QAAO,aAAa;AACvC,SAAQC,SAAS,QAAO,mBAAmB;AAC3C,SAAQC,kBAAkB,QAAO,6BAA6B;AAE9D,OAAO,MAAMC,WAAW,GAAG,uBAAuB;AAElD,OAAO,MAAMC,mBAAmB,GAAG,MAAc;EAC/C,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAACJ,WAAW,CAAC;EAC/C,OAAOE,KAAK,GAAGA,KAAK,GAAGG,6BAA6B,EAAE;AACxD,CAAC;AAED,MAAMA,6BAA6B,GAAG,MAAc;EAAA;EAClD,MAAMC,QAAQ,GAAGT,WAAW,EAAE;EAE9BS,QAAQ,CACNR,SAAS,CAACS,gBAAgB,CAAC;IACzBC,MAAM,EAAET,kBAAkB,CAACU,KAAK;IAChCC,KAAK,EAAE,+BAA+B;IACtCC,OAAO,EAAE;EACX,CAAC,CAAC,CACH;EAED,MAAMC,OAAO,GAAGhB,UAAU,EAAE;EAC5BgB,OAAO,CAACC,OAAO,CAAC,QAAQ,CAAC;EAEzB,OAAO,EAAE;AACX,CAAC;AAAA,GAfKR,6BAA6B;EAAA,QAChBR,WAAW,EAUZD,UAAU;AAAA"},"metadata":{},"sourceType":"module"}