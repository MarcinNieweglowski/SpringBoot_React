{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nconst initialState = {\n  products: [],\n  totalPrice: 0\n};\nconst productSlice = createSlice({\n  name: 'product',\n  initialState: initialState,\n  reducers: {\n    populateProductList(state, action) {\n      state.products = action.payload.products;\n      state.totalPrice = action.payload.totalPrice;\n    },\n    addProduct(state, action) {\n      const product = action.payload;\n      const existingProduct = state.products.find(existingProduct => existingProduct.productId === product.productId);\n      if (existingProduct) {\n        return;\n      }\n      state.totalPrice = state.totalPrice + product.price;\n      const products = state.products;\n      products.push(product);\n      state.products = products;\n    },\n    removeProduct(state, action) {\n      const productToBeRemoved = action.payload;\n      const existingProduct = state.products.find(existingProduct => existingProduct.productId === productToBeRemoved.productId);\n      state.totalPrice = state.totalPrice - productToBeRemoved.price;\n      if (existingProduct.quantity > 1) {\n        existingProduct.quantity--;\n      } else {\n        state.products = state.products.filter(existingProduct => existingProduct.productId !== productToBeRemoved.productId);\n      }\n    },\n    editProduct(state, action) {\n      const updatedProduct = action.payload;\n      let existingProduct = state.products.find(existingProduct => existingProduct.productId === updatedProduct.productId);\n      if (!existingProduct) {\n        return;\n      }\n      existingProduct.price = updatedProduct.price;\n      existingProduct.quantity = updatedProduct.quantity;\n      state.totalPrice = state.products.map(p => p.quantity * p.price).reduce((previous, current) => previous + current, 0);\n    },\n    deleteProduct(state, action) {\n      const productToBeRemoved = action.payload;\n      state.products = state.products.filter(existingProduct => existingProduct.productId !== productToBeRemoved.productId);\n      state.totalPrice = state.products.map(p => p.quantity * p.price).reduce((previous, current) => previous + current, 0);\n    }\n  }\n});\nexport const productActions = productSlice.actions;\nexport default productSlice;","map":{"version":3,"names":["createSlice","initialState","products","totalPrice","productSlice","name","reducers","populateProductList","state","action","payload","addProduct","product","existingProduct","find","productId","price","push","removeProduct","productToBeRemoved","quantity","filter","editProduct","updatedProduct","map","p","reduce","previous","current","deleteProduct","productActions","actions"],"sources":["C:/Workspace/Java_Test/springboot-react-test/ui/src/store/product-slice.tsx"],"sourcesContent":["import {createSlice} from \"@reduxjs/toolkit\";\r\nimport {Product} from \"../types/Product\";\r\nimport {OperationType} from \"../types/OperationType\";\r\n\r\nexport type InitialProductState = {\r\n  products: Product[],\r\n  totalPrice: number\r\n}\r\n\r\nconst initialState = {\r\n  products: [],\r\n  totalPrice: 0\r\n} as InitialProductState;\r\n\r\nconst productSlice = createSlice({\r\n  name: 'product',\r\n  initialState: initialState,\r\n  reducers: {\r\n    populateProductList(state, action) {\r\n      state.products = action.payload.products;\r\n      state.totalPrice = action.payload.totalPrice;\r\n    },\r\n    addProduct(state, action) {\r\n      const product: Product = action.payload;\r\n      const existingProduct = state.products.find(existingProduct => existingProduct.productId === product.productId);\r\n\r\n      if (existingProduct) {\r\n        return;\r\n      }\r\n\r\n      state.totalPrice = state.totalPrice + product.price;\r\n      const products: Array<Product> = state.products;\r\n      products.push(product);\r\n      state.products = products;\r\n    },\r\n    removeProduct(state, action) {\r\n      const productToBeRemoved: Product = action.payload;\r\n      const existingProduct = state.products.find(existingProduct => existingProduct.productId === productToBeRemoved.productId) as Product;\r\n\r\n      state.totalPrice = state.totalPrice - productToBeRemoved.price;\r\n\r\n      if (existingProduct.quantity > 1) {\r\n        existingProduct.quantity--;\r\n      } else {\r\n        state.products = state.products.filter(existingProduct => existingProduct.productId !== productToBeRemoved.productId);\r\n      }\r\n    },\r\n    editProduct(state, action) {\r\n      const updatedProduct: Product = action.payload;\r\n      let existingProduct = state.products.find(existingProduct => existingProduct.productId === updatedProduct.productId);\r\n\r\n      if (!existingProduct) {\r\n        return;\r\n      }\r\n\r\n      existingProduct.price = updatedProduct.price;\r\n      existingProduct.quantity = updatedProduct.quantity;\r\n\r\n      state.totalPrice = state.products\r\n        .map(p => p.quantity * p.price)\r\n        .reduce((previous, current) => previous + current, 0);\r\n    },\r\n    deleteProduct(state, action) {\r\n      const productToBeRemoved: Product = action.payload;\r\n      state.products = state.products.filter(existingProduct => existingProduct.productId !== productToBeRemoved.productId);\r\n\r\n      state.totalPrice = state.products\r\n        .map(p => p.quantity * p.price)\r\n        .reduce((previous, current) => previous + current, 0);\r\n    }\r\n  }\r\n});\r\n\r\nexport const productActions = productSlice.actions;\r\n\r\nexport default productSlice;"],"mappings":"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"},"metadata":{},"sourceType":"module"}